(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},22834,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(76009);e.i(36180);var a=e.i(98925);function n({postId:e}){let[n,o]=(0,s.useState)(0),[d,l]=(0,s.useState)(0),[i,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)([]),[b,u]=(0,s.useState)(""),[p,h]=(0,s.useState)(""),[g,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=`liked_${e}`;"true"===localStorage.getItem(t)&&c(!0);let s=`viewed_${e}`;if(!sessionStorage.getItem(s)){let t=(0,a.doc)(r.db,"artifacts",r.APP_ID,"public","data","stats",e);(0,a.setDoc)(t,{views:(0,a.increment)(1),lastViewed:(0,a.serverTimestamp)()},{merge:!0}).catch(console.error),sessionStorage.setItem(s,"true")}let n=(0,a.doc)(r.db,"artifacts",r.APP_ID,"public","data","stats",e),d=(0,a.onSnapshot)(n,e=>{if(e.exists()){let t=e.data();o(t.likes||0),l(t.views||0)}}),i=(0,a.collection)(r.db,"artifacts",r.APP_ID,"public","data",`comments_${e}`),m=(0,a.query)(i,(0,a.orderBy)("timestamp","desc"),(0,a.limit)(20)),b=(0,a.onSnapshot)(m,e=>{x(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>{d(),b()}},[e]);let k=async()=>{if(i)return;c(!0),localStorage.setItem(`liked_${e}`,"true");let t=(0,a.doc)(r.db,"artifacts",r.APP_ID,"public","data","stats",e);await (0,a.setDoc)(t,{likes:(0,a.increment)(1)},{merge:!0})},j=async t=>{if(t.preventDefault(),p.trim()){f(!0);try{let t=(0,a.collection)(r.db,"artifacts",r.APP_ID,"public","data",`comments_${e}`);await (0,a.addDoc)(t,{name:b||"Anonymous",text:p,timestamp:(0,a.serverTimestamp)()}),h("")}catch(e){console.error("Error posting comment:",e)}finally{f(!1)}}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"mx-4 sm:mx-0 flex flex-wrap items-center justify-center gap-4 py-8 border-t border-b border-stone-100 dark:border-white/10 mb-12",children:[(0,t.jsxs)("button",{onClick:k,disabled:i,className:`flex items-center gap-2 px-6 py-2 rounded-full transition-all ${i?"text-red-500 bg-red-50 dark:bg-red-900/20 cursor-default":"text-stone-600 dark:text-stone-300 bg-stone-50 dark:bg-stone-800 hover:bg-red-50 hover:text-red-500"}`,children:[(0,t.jsx)("span",{children:i?"â¤ï¸":"ðŸ¤"}),(0,t.jsxs)("span",{children:[n," Likes"]})]}),(0,t.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href).then(()=>{alert("Link copied to clipboard!")})},className:"flex items-center gap-2 px-6 py-2 rounded-full transition-all text-stone-600 dark:text-stone-300 bg-stone-50 dark:bg-stone-800 hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/20",children:[(0,t.jsx)("span",{children:"ðŸ“¤"})," Share"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-6 py-2 text-stone-400",children:[(0,t.jsx)("span",{children:"ðŸ‘ï¸"})," ",(0,t.jsxs)("span",{children:[d," Views"]})]})]}),(0,t.jsxs)("section",{className:"px-4 sm:px-0 max-w-3xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-serif font-bold text-stone-900 dark:text-white",children:"Discussion"}),(0,t.jsx)("span",{className:"text-xs font-mono text-stone-400 uppercase tracking-wider",children:"Community"})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-stone-900 border border-stone-200 dark:border-stone-800 rounded-2xl p-6 mb-12 shadow-sm",children:(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-2",children:"Display Name"}),(0,t.jsx)("input",{type:"text",value:b,onChange:e=>u(e.target.value),placeholder:"Anonymous",className:"w-full px-4 py-2 bg-stone-50 dark:bg-black/40 border border-stone-200 dark:border-stone-700 rounded-lg text-sm outline-none focus:border-brand-500 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-bold text-stone-500 uppercase tracking-wider mb-2",children:"Your Message"}),(0,t.jsx)("textarea",{rows:3,value:p,onChange:e=>h(e.target.value),placeholder:"Share your thoughts...",required:!0,className:"w-full px-4 py-3 bg-stone-50 dark:bg-black/40 border border-stone-200 dark:border-stone-700 rounded-lg text-sm outline-none focus:border-brand-500 dark:text-white resize-y min-h-[100px]"})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("button",{type:"submit",disabled:g,className:"px-6 py-2.5 bg-stone-900 hover:bg-brand-600 dark:bg-stone-100 dark:hover:bg-brand-400 text-white dark:text-stone-900 text-sm font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[g?"Posting...":"Post Comment"," ðŸš€"]})})]})}),(0,t.jsx)("div",{className:"space-y-8 pb-12",children:0===m.length?(0,t.jsx)("div",{className:"text-center py-8 bg-stone-50 dark:bg-stone-800/30 rounded-xl border border-stone-100 dark:border-stone-800/50",children:(0,t.jsx)("p",{className:"text-stone-400 text-sm italic",children:"No comments yet. Be the first to share your thoughts."})}):m.map(e=>(0,t.jsxs)("div",{className:"flex gap-4 fade-in group",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-100 dark:bg-brand-900/30 flex flex-shrink-0 items-center justify-center text-brand-700 dark:text-brand-400 font-bold text-sm shadow-sm border border-white dark:border-stone-700",children:e.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1 bg-stone-50 dark:bg-stone-800/30 p-4 rounded-r-2xl rounded-bl-2xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"font-bold text-sm text-stone-900 dark:text-stone-200",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-stone-400 font-mono",children:e.timestamp?.seconds?new Date(1e3*e.timestamp.seconds).toLocaleDateString():"Just now"})]}),(0,t.jsx)("p",{className:"text-stone-700 dark:text-stone-300 text-base leading-relaxed font-serif",children:e.text})]})]},e.id))})]})]})}e.s(["default",()=>n])}]);